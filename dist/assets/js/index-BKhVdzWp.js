import{r as a,o as e,E as l,G as s,j as t,I as n,W as o,D as i,x as c,K as d,B as r,J as v}from"./vue-vendor-loiPTQO0.js";import{g as u,l as m}from"./user-nHm_wyER.js";import{_ as p,u as g}from"./index-CD_ICcaK.js";import{s as f,a as b,b as h,F as k,B as y}from"./ui-vendor-B9LTyEOQ.js";import"./rquest-BdLykTFq.js";const x={class:"login-page"},_={class:"login-container"},I={class:"form-container"},j={class:"form-item"},q={class:"form-input"},V={class:"form-item"},w={class:"form-input code-input"},B={class:"login-btn"},C=p({__name:"index",setup(p){const C=r(),D=v(),U=g(),z=a(""),E=a(""),F=a(!1),G=a(0);let J=null;const K=async()=>{var a,e;if(!(G.value>0))if(z.value&&11===z.value.length)try{const a=await u(z.value);"10000"===a.code&&!0===a.data?(b("验证码已发送"),G.value=60,J=setInterval(()=>{G.value--,G.value<=0&&clearInterval(J)},1e3)):h(a.message||"验证码发送失败")}catch(l){h((null==(e=null==(a=l.response)?void 0:a.data)?void 0:e.message)||l.message||"验证码发送失败，请检查网络")}else f("请输入正确的手机号")},L=async()=>{var a,e,l;if(z.value&&11===z.value.length)if(E.value&&6===E.value.length){F.value=!0;try{const e=await m({phone:z.value,code:E.value});if("10000"===e.code){const l=(null==(a=e.data.tokenInfo)?void 0:a.access_token)||"mock-token";localStorage.setItem("token",l),U.setLogin({phone:z.value,token:l,userData:e.data}),b("登录成功");const s=D.query.redirect||"/vehicle-info";C.replace(s)}else h(e.message||"登录失败")}catch(s){h((null==(l=null==(e=s.response)?void 0:e.data)?void 0:l.message)||s.message||"登录失败，请检查网络")}finally{F.value=!1}}else f("请输入6位验证码");else f("请输入正确的手机号")};return e(()=>{J&&(clearInterval(J),J=null)}),(a,e)=>{const r=k,v=y;return i(),l("div",x,[s("div",_,[s("div",I,[s("div",j,[e[2]||(e[2]=s("div",{class:"form-label"},"手机号",-1)),s("div",q,[t(r,{modelValue:z.value,"onUpdate:modelValue":e[0]||(e[0]=a=>z.value=a),placeholder:"请输入手机号",rules:[{required:!0,message:"请填写手机号"}],type:"tel",maxlength:"11"},null,8,["modelValue"])])]),s("div",V,[e[3]||(e[3]=s("div",{class:"form-label"},"验证码",-1)),s("div",w,[t(r,{modelValue:E.value,"onUpdate:modelValue":e[1]||(e[1]=a=>E.value=a),placeholder:"请输入验证码",rules:[{required:!0,message:"请填写验证码"}],type:"digit",maxlength:"6"},null,8,["modelValue"]),t(v,{size:"small",type:"primary",class:"code-btn",disabled:G.value>0,onClick:K},{default:n(()=>[c(d(G.value>0?`${G.value}s后重新获取`:"获取验证码"),1)]),_:1},8,["disabled"])])]),s("div",B,[t(v,{block:"",type:"primary",loading:F.value,onClick:L},{default:n(()=>e[4]||(e[4]=[c(" 登录 ")])),_:1},8,["loading"])]),e[5]||(e[5]=o('<div class="agreement" data-v-4e0bc199> 登录即代表您同意<span class="agreement-link" data-v-4e0bc199>《用户协议》</span>和<span class="agreement-link" data-v-4e0bc199>《隐私政策》</span></div><div class="disclaimer" data-v-4e0bc199><p data-v-4e0bc199><strong data-v-4e0bc199>非官方声明：</strong>本平台为第三方独立运营网站，未获得任何赞助。 </p><p data-v-4e0bc199><strong data-v-4e0bc199>隐私保护声明：</strong>本站不会主动收集、存储或泄露您的个人信息。登录所使用的手机号与验证码仅用于临时身份验证，不会用于其他用途，也不会共享给任何第三方。 </p><p data-v-4e0bc199><strong data-v-4e0bc199>免责声明：</strong>本站内容来源于公开信息整理，仅供技术交流与参考使用。因使用本站信息导致的任何损失或风险，均由用户自行承担，本站不承担法律责任。 </p><p class="contact" data-v-4e0bc199> 如有侵权或合作事宜，请联系邮箱： <a href="mailto:qianxumanniu@163.com" class="email-link" data-v-4e0bc199>qianxumanniu@163.com</a></p></div>',2))])])])}}},[["__scopeId","data-v-4e0bc199"]]);export{C as default};
